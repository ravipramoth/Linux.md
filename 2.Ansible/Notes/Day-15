Ansible Module to work with files using modules 

1. ansible.builtin.command 
    Executes a command on a remote machine.

Description: Runs a specified command on the target machine. It does not process the command through a shell, so no shell features like piping, redirection, or variable substitution are available.


ansible all -m ansible.builtin.command -a "ls /home/" -b 
ansible all -m ansible.builtin.command -a "ls -l /var/log" -b
ansible all -m ansible.builtin.command -a "mkdir -p /tmp/demo-dir" -b

2. ansible.builtin.shell 
    Executes a shell command on the remote machine.

Description: Runs a shell command on the target machine, and allows you to use shell features like pipes, redirects, and variable substitution.


ansible all -m ansible.builtin.shell -a "echo 'Hello, World!' > /opt/hello.txt" -b  
ansible all -m ansible.builtin.shell  -a " cat /home/ansadmin/test/test.txt | wc -l" -b 

Difference b/w shell and Command

| Feature                   | `command`         | `shell`           |             |
| ------------------------- | ----------------- | ----------------- | ----------- |
| Uses shell                | ❌ No              | ✅ Yes             |             |
| Supports pipes (\`        | \`)               | ❌ No              | ✅ Yes       |
| Supports redirects (`>`)  | ❌ No              | ✅ Yes             |             |
| Safe from shell injection | ✅ Yes             | ❌ No              |             |
| Performance               | ✅ Slightly faster | ❌ Slightly slower |             |
| Example                   | `ls -l /etc`      | \`ls -l /etc      | grep conf\` |

 
3. ansible.builtin.file 

    Create/Modify file attributes like permissions, owner, and group.
    It Create/delete - directory /file 

Description: Used to set or change the permissions, ownership, and symbolic links of files or directories on the remote machine.

ansible all -m ansible.builtin.file -a "path=/home/ansadmin/test/test.txt mode=0644 owner=ansadmin group=ansadmin" -b 


ansible all -m ansible.builtin.file -a " path=/home/ansadmin/test/dirc owner=ansadmin group=ansadmin state=directory" -b 

to create a file = touch
to create directory = directroy 
to delete file/directory = absent 
to create a link file = link -- soft link 
to create a hard link file = hard

    ansible all -m ansible.builtin.file -a " src=/home/ansadmin/test/test2.txt dest=/tmp/text.txt owner=ansadmin group=ansadmin state=link " -b 

--------------------------------------------------------------------------------------- 

ansible.builtin.copy --  We can copy file from controller to managed Nodes  

Below command will copy a file from Controller to manged  nodes 

bash '''
    ansible all -m ansible.builtin.copy -a "src=/home/ansadmin/aws dest=/tmp " -b 
'''

Below command will copy inline content to file in manged nodes 

ansible all -m ansible.builtin.copy -a " content='# This is demo to show inline content to file \n ' dest=/tmp/aws" -b 

 